{"version":3,"sources":["api/api.js","redux/Profile-reducers.js","assets/images/user_image.png","App.module.css","CSS/users.module.css","assets/images/6.gif","components/Common/FormControl/FormControl.js","utils/object-helper.js","redux/UsersPage-reducers.js","redux/auth-reducers.js","redux/app-reducer.js","redux/redux-store.js","Menu.js","components/Common/Paginator/Paginator.jsx","components/User.jsx","components/Users.jsx","redux/users-selectors.js","components/UsersContainer.js","components/Header.js","components/HeaderContainer.js","components/Login/Login.jsx","HOC/withLazySuspense.js","App.js","index.js","components/Common/FormControl/FormControl.module.css","utils/validators/validators.js","components/Common/Paginator/Paginator.module.css","components/Common/Preloader/Preloader.js","HOC/withAuthRedirect.js","redux/messagesPage-reducer.js"],"names":["instance","axios","withCredentials","baseURL","headers","userAPI","getUsers","currentPage","pageSize","get","then","response","data","follow","id","post","unfollow","delete","authAPI","me","login","email","password","rememberMe","captcha","logout","profileAPI","getProfile","userId","getStatus","updateStatus","status","put","savePhoto","photoFile","formData","FormData","append","saveProfile","profile","securityAPI","getCaptchaUrl","initialState","setStatus","type","getUserProfile","dispatch","a","async","resultCode","file","photos","getState","auth","stopSubmit","_error","messages","Promise","reject","ProfileReducer","state","action","module","exports","FormControl","input","meta","touched","error","children","showError","className","styles","formControl","Textarea","props","restProps","child","Input","createField","placeholder","name","validators","component","text","validate","updateObjectInArray","items","itemId","objPropName","newObjProps","map","u","users","totalUsersCount","isFetching","followingInProgress","followSuccess","unfollowSuccess","setCurrentPage","toggleIsFetching","toggleFollowingProgress","followUnfollowFlow","apiMethod","actionCreator","UsersPageReducer","followed","count","filter","usersId","isAuth","captchaUrl","setAuthUserData","payload","getCaptchaUrlSuccess","getAuthUserData","url","authReducer","initialized","appReducer","reducers","combineReducers","messagesPage","MessagesPageReducer","usersPage","profilePage","form","formReducer","app","store","createStore","applyMiddleware","thunkMiddleware","window","Menu","classes","MenuG","to","track","activeClassName","active","Paginator","totalItemsCount","onPageChanged","portionSize","pagesCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","paginator","onClick","p","cn","selectedPage","pageNumber","key","e","User","user","src","small","userPhoto","disabled","some","Users","createSelector","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","UsersContainer","this","Preloader","React","Component","compose","withAuthRedirect","connect","bind","totalCount","Header","Top","TopG","TopH","loginBlock","loginBlockDiv","button1","HeaderContainer","LoginReduxForm","reduxForm","handleSubmit","onSubmit","requiredField","formSummaryError","message","length","withLazySuspense","Suspense","fallback","MessagesContainer","lazy","ProfileContainer","App","catchAllUnhandledErrors","promiseRejectionEvent","alert","console","initializeApp","addEventListener","removeEventListener","Authorization","exact","path","render","AppContainer","promise","all","withRouter","MainApp","ReactDOM","document","getElementById","value","maxLenghtCreator","maxLenght","preloader","mapStateToPropsForRedirect","RedirectComponent","dialogsData","posts","addMessageActionCreator","newMessageText","messageId","newMessage"],"mappings":"uGAAA,qJAEMA,EAAWC,SAAa,CAC1BC,iBAAiB,EACjBC,QAAS,gDACTC,QAAS,CACL,UAAW,0CAINC,EAAU,CACnBC,SADmB,SACTC,EAAaC,GACnB,OAAOR,EAASS,IAAT,qBAA2BF,EAA3B,kBAAgDC,IAClDE,MAAK,SAAAC,GACF,OAAOA,EAASC,SAG5BC,OAPmB,SAOXC,GACJ,OAAOd,EAASe,KAAT,iBAAwBD,GAAM,IAChCJ,MAAK,SAAAC,GACF,OAAOA,EAASC,SAG5BI,SAbmB,SAaTF,GACN,OAAOd,EAASiB,OAAT,iBAA0BH,IAC5BJ,MAAK,SAAAC,GACF,OAAOA,EAASC,UAKnBM,EAAU,CACnBC,GADmB,WAEf,OAAOnB,EAASS,IAAI,YAExBW,MAJmB,SAIZC,EAAOC,GAA+C,IAArCC,EAAoC,wDAAhBC,EAAgB,uDAAN,KAClD,OAAOxB,EAASe,KAAK,aAAc,CAACM,QAAOC,WAAUC,aAAYC,aAErEC,OAPmB,WAQf,OAAOzB,EAASiB,OAAO,gBAIlBS,EAAa,CACtBC,WADsB,SACXC,GACP,OAAO5B,EAASS,IAAI,WAAamB,IAErCC,UAJsB,SAIZD,GACN,OAAO5B,EAASS,IAAI,kBAAoBmB,IAE5CE,aAPsB,SAOTC,GACT,OAAO/B,EAASgC,IAAI,iBAAkB,CAClCD,OAAQA,KAGhBE,UAZsB,SAYZC,GACN,IAAMC,EAAW,IAAIC,SAErB,OADAD,EAASE,OAAO,QAASH,GAClBlC,EAASgC,IAAI,gBAAiBG,EAAU,CAC3C/B,QAAS,CACL,eAAgB,0BAI5BkC,YArBsB,SAqBVC,GACR,OAAOvC,EAASgC,IAAI,UAAWO,KAI1BC,EAAc,CACvBC,cADuB,WAEnB,OAAOzC,EAASS,IAAI,+B,sPChExBiC,EAAe,CACfH,QAAS,KACTR,OAAQ,IAsBCY,EAAY,SAACZ,GAAD,MAAa,CAClCa,KA5Be,aA6Bfb,WAOSc,EAAiB,SAACjB,GAAD,OAAY,SAAOkB,GAAP,eAAAC,EAAAC,OAAA,kEAAAD,EAAA,MACjBrB,IAAWC,WAAWC,IADL,OAClCjB,EADkC,OAEtCmC,EAfwC,CACxCF,KAzBqB,mBA0BrBL,QAawB5B,EAASC,OAFK,uCAI7BiB,EAAY,SAACD,GAAD,OAAY,SAAOkB,GAAP,eAAAC,EAAAC,OAAA,kEAAAD,EAAA,MACZrB,IAAWG,UAAUD,IADT,OAC7BjB,EAD6B,OAEjCmC,EAASH,EAAUhC,EAASC,OAFK,uCAIxBkB,EAAe,SAACC,GAAD,OAAY,SAAOe,GAAP,SAAAC,EAAAC,OAAA,2EAAAD,EAAA,MAEXrB,IAAWI,aAAaC,IAFb,OAGC,IAHD,OAGnBnB,KAAKqC,YACdH,EAASH,EAAUZ,IAJS,wGAU3BE,EAAY,SAACiB,GAAD,OAAU,SAAOJ,GAAP,eAAAC,EAAAC,OAAA,kEAAAD,EAAA,MACVrB,IAAWO,UAAUiB,IADX,OAEE,KAD7BvC,EAD2B,QAElBC,KAAKqC,YACdH,EA1BqC,CACzCF,KA/BuB,qBAgCvBO,OAwB8BxC,EAASC,KAAKA,KAAKuC,SAHlB,uCAMtBb,EAAc,SAACC,GAAD,OAAa,SAAOO,EAAUM,GAAjB,iBAAAL,EAAAC,OAAA,uDAC9BpB,EAASwB,IAAWC,KAAKzB,OADK,WAAAmB,EAAA,MAEbrB,IAAWY,YAAYC,IAFV,UAGH,KAD3B5B,EAF8B,QAGvBC,KAAKqC,WAHkB,gBAIhCH,EAASD,EAAejB,IAJQ,8BAMhCkB,EAASQ,YAAW,eAAgB,CAACC,OAAQ5C,EAASC,KAAK4C,SAAS,MANpC,kBAOzBC,QAAQC,OAAO/C,EAASC,KAAK4C,SAAS,KAPb,wCAWzBG,IA/DQ,WAAmC,IAAlCC,EAAiC,uDAAzBlB,EAAcmB,EAAW,uCACrD,OAAOA,EAAOjB,MACV,IAXiB,mBAYb,OAAO,eAAIgB,EAAX,CAAkBrB,QAASsB,EAAOtB,UAEtC,IAbW,aAcP,OAAO,eAAIqB,EAAX,CAAkB7B,OAAQ8B,EAAO9B,SAErC,IAfmB,qBAgBf,OAAO,eAAI6B,EAAX,CAAkBrB,QAAQ,eAAKqB,EAAMrB,QAAZ,CAAqBY,OAAQU,EAAOV,WAEjE,QAAS,OAAOS,K,oBCvBxBE,EAAOC,QAAU,IAA0B,wC,mBCC3CD,EAAOC,QAAU,CAAC,IAAM,iBAAiB,IAAM,iBAAiB,KAAO,kBAAkB,KAAO,kBAAkB,cAAgB,2BAA2B,KAAO,kBAAkB,MAAQ,mBAAmB,OAAS,oBAAoB,QAAU,qBAAqB,SAAW,sBAAsB,WAAa,wBAAwB,QAAU,qBAAqB,cAAgB,6B,oBCAlYD,EAAOC,QAAU,CAAC,UAAY,2B,oBCD9BD,EAAOC,QAAU,IAA0B,+B,iOCIrCC,EAAc,SAAC,GAA8C,EAA7CC,MAA8C,IAAD,IAAtCC,KAAOC,EAA+B,EAA/BA,QAASC,EAAsB,EAAtBA,MAAQC,EAAc,EAAdA,SAC3CC,EAAYH,GAAWC,EAC7B,OACI,yBAAKG,UAAWC,IAAOC,YAAc,KAAOH,EAAYE,IAAOJ,MAAQ,KACnE,6BACKC,GAEJC,GAAa,8BAAOF,KAKpBM,EAAW,SAACC,GAAW,IACzBV,EAAoCU,EAApCV,MAAuBW,GAAaD,EAA7BT,KAA6BS,EAAvBE,MADW,YACYF,EADZ,2BAE/B,OAAO,kBAACX,EAAgBW,EAAO,8CAAcV,EAAWW,MAE/CE,EAAQ,SAACH,GAAW,IACtBV,EAAoCU,EAApCV,MAAuBW,GAAaD,EAA7BT,KAA6BS,EAAvBE,MADQ,YACeF,EADf,2BAE5B,OAAO,kBAACX,EAAgBW,EAAO,2CAAWV,EAAWW,MAE5CG,EAAc,SAACC,EAAaC,EAAMC,EAAYC,GAAhC,IAA2CR,EAA3C,uDAAmD,GAAIS,EAAvD,uDAA8D,GAA9D,OACvB,6BACI,kBAAC,IAAD,eAAOJ,YAAaA,EAAaC,KAAMA,EAAME,UAAWA,EAAWE,SAAUH,GAAgBP,IADjG,IAC2GS,K,wHC1BlGE,EAAsB,SAACC,EAAOC,EAAQC,EAAaC,GAC5D,OAAOH,EAAMI,KAAI,SAAAC,GACb,OAAIA,EAAEH,KAAiBD,EACZ,eAAII,EAAX,GAAiBF,GAEdE,MCMXlD,EAAe,CACfmD,MAAO,GACPrF,SAAU,GACVsF,gBAAiB,EACjBvF,YAAa,EACbwF,YAAY,EACZC,oBAAqB,IAiDZC,EAAgB,SAACrE,GAAD,MAAa,CACtCgB,KAhEW,SAiEXhB,WAESsE,EAAkB,SAACtE,GAAD,MAAa,CACxCgB,KAnEa,WAoEbhB,WAMSuE,EAAiB,SAAC5F,GAAD,MAAkB,CAC5CqC,KAzEqB,mBA0ErBrC,gBAMS6F,EAAmB,SAACL,GAAD,MAAiB,CAC7CnD,KA/EuB,qBAgFvBmD,eAESM,EAA0B,SAACN,EAAYnE,GAAb,MAAyB,CAC5DgB,KAlFiC,+BAmFjCmD,aACAnE,WAcE0E,EAAqB,SAAOxD,EAAUlB,EAAQ2E,EAAWC,GAApC,SAAAzD,EAAAC,OAAA,uDACvBF,EAASuD,GAAyB,EAAMzE,IADjB,WAAAmB,EAAA,MAENwD,EAAU3E,IAFJ,OAGA,GAHA,OAGdqB,YACLH,EAAS0D,EAAc5E,IAE3BkB,EAASuD,GAAyB,EAAOzE,IANlB,sCAoBZ6E,EA3GU,WAAmC,IAAlC7C,EAAiC,uDAAzBlB,EAAcmB,EAAW,uCACvD,OAAOA,EAAOjB,MACV,IAnBO,SAoBH,OAAO,eACAgB,EADP,CAEIiC,MAAOP,EAAoB1B,EAAMiC,MAAOhC,EAAOjC,OAAQ,KAAM,CAAC8E,UAAU,MAShF,IA9BS,WA+BL,OAAO,eACA9C,EADP,CAEIiC,MAAOP,EAAoB1B,EAAMiC,MAAOhC,EAAOjC,OAAQ,KAAM,CAAC8E,UAAU,MAShF,IAzCU,YA0CN,OAAO,eAAI9C,EAAX,CAAkBiC,MAAM,YAAIhC,EAAOgC,SAEvC,IA3CiB,mBA4Cb,OAAO,eAAIjC,EAAX,CAAkBrD,YAAasD,EAAOtD,cAE1C,IA7CsB,wBA8ClB,OAAO,eAAIqD,EAAX,CAAkBkC,gBAAiBjC,EAAO8C,QAE9C,IA/CmB,qBAgDf,OAAO,eAAI/C,EAAX,CAAkBmC,WAAYlC,EAAOkC,aAEzC,IAjD6B,+BAkDzB,OAAO,eACAnC,EADP,CAEIoC,oBAAqBnC,EAAOkC,WAAP,sBAAwBnC,EAAMoC,qBAA9B,CAAmDnC,EAAOjC,SAAUgC,EAAMoC,oBAAoBY,QAAO,SAAA9F,GAAE,OAAIA,GAAM+C,EAAOjC,YAErJ,QAAS,OAAOgC,I,iBCzDpBlB,EAAe,CACfmE,QAAS,KACTxF,MAAO,KACPD,MAAO,KACP0F,QAAQ,EACRC,WAAY,MAcHC,EAAkB,SAACpF,EAAQP,EAAOD,EAAO0F,GAAvB,MAAmC,CAC9DlE,KAvBkB,gBAwBlBqE,QAAS,CAACrF,SAAQP,QAAOD,QAAO0F,YAEvBI,EAAuB,SAACH,GAAD,MAAiB,CACjDnE,KA1B4B,0BA2B5BqE,QAAS,CAACF,gBAGDI,EAAkB,kBAAM,SAAOrE,GAAP,uBAAAC,EAAAC,OAAA,kEAAAD,EAAA,MACZ7B,IAAQC,MADI,OAEA,KAD7BR,EAD6B,QAEpBC,KAAKqC,aAAmB,EACRtC,EAASC,KAAKA,KAAlCE,EAD2B,EAC3BA,GAAIM,EADuB,EACvBA,MAAOC,EADgB,EAChBA,MAChByB,EAASkE,EAAgBlG,EAAIO,EAAOD,GAAO,KAJd,uCAyBxBqB,EAAgB,kBAAM,SAAOK,GAAP,iBAAAC,EAAAC,OAAA,kEAAAD,EAAA,MACRP,IAAYC,iBADJ,OACzB9B,EADyB,OAEzBoG,EAAapG,EAASC,KAAKwG,IACjCtE,EAASoE,EAAqBH,IAHC,uCAMpBM,EAnDK,WAAmC,IAAlCzD,EAAiC,uDAAzBlB,EAAcmB,EAAW,uCAClD,OAAOA,EAAOjB,MACV,IAbc,gBAcd,IAbwB,0BAcpB,OAAO,eACAgB,EADP,GAEOC,EAAOoD,SAElB,QAAS,OAAOrD,I,kBChBpBlB,EAAe,CACf4E,aAAa,GAwBFC,EArBI,WAAmC,IAAlC3D,EAAiC,uDAAzBlB,EAAcmB,EAAW,uCACjD,OAAOA,EAAOjB,MACV,IARoB,sBAShB,OAAO,eACAgB,EADP,CAEI0D,aAAa,IAErB,QAAS,OAAO1D,ICRpB4D,EAAWC,YAAgB,CAC3BC,aAAcC,IACdC,UAAWnB,EACXoB,YAAalE,IACbN,KAAMgE,EACNS,KAAMC,IACNC,IAAKT,IAGLU,EAAQC,YAAYV,EAASW,YAAgBC,MAEjDC,OAAOJ,MAAQA,EAEAA,Q,2GCNAK,EAXF,SAAC3D,GAAD,OAGZ,yBAAKJ,UAAWgE,IAAQD,MACvB,yBAAK/D,UAAWgE,IAAQC,OACvB,kBAAC,IAAD,CAASC,GAAI9D,EAAM+D,MAAOC,gBAAiBJ,IAAQK,QAASjE,EAAMM,S,8ECwBtD4D,GA9BC,SAAC,GAIb,IAJ4F,IAA9EC,EAA6E,EAA7EA,gBAAiBtI,EAA4D,EAA5DA,SAAUD,EAAkD,EAAlDA,YAAawI,EAAqC,EAArCA,cAAqC,IAAtBC,mBAAsB,MAAR,GAAQ,EAEvFC,EAAaC,KAAKC,KAAKL,EAAgBtI,GACvC4I,EAAQ,GACHC,EAAE,EAAGA,GAAGJ,EAAYI,IACzBD,EAAME,KAAKD,GAEf,IAAIE,EAAeL,KAAKC,KAAKF,EAAWD,GAPmD,EAQnDQ,mBAAS,GAR0C,mBAQtFC,EARsF,KAQvEC,EARuE,KASvFC,GAAyBF,EAAgB,GAAKT,EAAc,EAC5DY,EAAyBH,EAAgBT,EAC7C,OAAO,yBAAKzE,UAAWC,IAAOqF,WACzBJ,EAAgB,GACjB,4BAAQK,QAAS,WAAOJ,EAAiBD,EAAgB,KAAzD,kCACCL,EACIxC,QAAO,SAAAmD,GAAC,OAAIA,GAAKJ,GAAyBI,GAAKH,KAC/CjE,KAAI,SAACoE,GACN,OAAO,0BAAMxF,UAAYyF,KAAG,eACvBxF,IAAOyF,aAAgB1J,IAAgBwJ,GACzCvF,IAAO0F,YACGC,IAAKJ,EACLD,QAAS,SAACM,GACnBrB,EAAcgB,KACdA,MAEPR,EAAeE,GAChB,4BAAQK,QAAS,WAAOJ,EAAiBD,EAAgB,KAAzD,0C,0CCOOY,GAhCJ,SAAC,GAAmD,IAAlDC,EAAiD,EAAjDA,KAAMtE,EAA2C,EAA3CA,oBAAqBhF,EAAsB,EAAtBA,SAAUH,EAAY,EAAZA,OAC9C,OACA,6BACQ,8BACI,6BACI,kBAAC,IAAD,CAAS4H,GAAI,YAAa6B,EAAKxJ,IAC3B,yBAAKyJ,IAA0B,MAArBD,EAAKnH,OAAOqH,MAAgBF,EAAKnH,OAAOqH,MAAQC,KAAWlG,UAAWC,KAAOiG,cAG/F,6BACKH,EAAK5D,SACF,4BAAQgE,SAAU1E,EAAoB2E,MAAK,SAAA7J,GAAE,OAAIA,IAAOwJ,EAAKxJ,MAAKgJ,QAAS,WACvE9I,EAASsJ,EAAKxJ,MADlB,gEAGA,4BAAQ4J,SAAU1E,EAAoB2E,MAAK,SAAA7J,GAAE,OAAIA,IAAOwJ,EAAKxJ,MAAKgJ,QAAS,WACvEjJ,EAAOyJ,EAAKxJ,MADhB,wEAKR,8BACA,8BACI,6BAAMwJ,EAAKrF,MACX,6BAAMqF,EAAKvI,SAEf,8BACI,6BAAM,yBACN,6BAAM,0BCjBX6I,GAVH,SAAC,GAA8E,IAA7ErK,EAA4E,EAA5EA,YAAawI,EAA+D,EAA/DA,cAAejD,EAAgD,EAAhDA,gBAAiBtF,EAA+B,EAA/BA,SAAUqF,EAAqB,EAArBA,MAAUlB,EAAW,oFACtF,OAAO,6BACH,kBAAC,GAAD,CAAWpE,YAAaA,EAAawI,cAAeA,EAAeD,gBAAiBhD,EAAiBtF,SAAUA,IAE3GqF,EAAMF,KAAI,SAAAC,GAAC,OAAI,kBAAC,GAAD,CAAM0E,KAAM1E,EAAGuE,IAAKvE,EAAE9E,GAAIkF,oBAAqBrB,EAAMqB,oBAAqBhF,SAAU2D,EAAM3D,SACpFH,OAAQ8D,EAAM9D,c,4BCJlCP,GAAWuK,cAHQ,SAACjH,GAC7B,OAAOA,EAAMgE,UAAU/B,SAE8B,SAACA,GACtD,OAAOA,EAAMe,QAAO,SAAAhB,GAAC,OAAI,QAEhBkF,GAAc,SAAClH,GACxB,OAAOA,EAAMgE,UAAUpH,UAEduK,GAAqB,SAACnH,GAC/B,OAAOA,EAAMgE,UAAU9B,iBAEdkF,GAAiB,SAACpH,GAC3B,OAAOA,EAAMgE,UAAUrH,aAEd0K,GAAgB,SAACrH,GAC1B,OAAOA,EAAMgE,UAAU7B,YAEdmF,GAAyB,SAACtH,GACnC,OAAOA,EAAMgE,UAAU5B,qBCArBmF,G,2MAKFpC,cAAgB,SAACmB,GACb,EAAKvF,MAAMrE,SAAS4J,EAAY,EAAKvF,MAAMnE,W,mFAH3C4K,KAAKzG,MAAMrE,SAAS8K,KAAKzG,MAAMpE,YAAa6K,KAAKzG,MAAMnE,Y,+BAOvD,OAAO,oCACF4K,KAAKzG,MAAMoB,WAAa,kBAACsF,GAAA,EAAD,MAAe,KACxC,kBAAC,GAAD,CAAOvF,gBAAiBsF,KAAKzG,MAAMmB,gBACvBtF,SAAU4K,KAAKzG,MAAMnE,SACrBD,YAAa6K,KAAKzG,MAAMpE,YACxBwI,cAAeqC,KAAKrC,cACpBlD,MAAOuF,KAAKzG,MAAMkB,MAClBhF,OAAQuK,KAAKzG,MAAM9D,OACnBG,SAAUoK,KAAKzG,MAAM3D,SACrBgF,oBAAqBoF,KAAKzG,MAAMqB,2B,GAnB3BsF,IAAMC,WAuEpBC,eACXC,KACAC,aAdkB,SAAC9H,GACnB,MAAO,CACHiC,MAAOvF,GAASsD,GAEhBpD,SAAUsK,GAAYlH,GACtBkC,gBAAiBiF,GAAmBnH,GACpCrD,YAAayK,GAAepH,GAC5BmC,WAAYkF,GAAcrH,GAC1BoC,oBAAqBkF,GAAuBtH,MAMvB,CAAC/C,OTsBR,SAACe,GACnB,OAAO,SAAOkB,GAAP,SAAAC,EAAAC,OAAA,gDACHsD,EAAmBxD,EAAUlB,EAAQvB,IAAQQ,OAAO8K,KAAKtL,KAAU4F,GADhE,uCSvB2BjF,ST2Bd,SAACY,GACrB,OAAO,SAAOkB,GAAP,SAAAC,EAAAC,OAAA,gDACHsD,EAAmBxD,EAAUlB,EAAQvB,IAAQW,SAAS2K,KAAKtL,KAAU6F,GADlE,uCS5BqCC,iBAAgBE,0BAAyB/F,STE7D,SAACC,EAAaC,GACvC,OAAO,SAAOsC,GAAP,eAAAC,EAAAC,OAAA,uDACFF,EAASsD,GAAiB,IAC1BtD,EAASqD,EAAe5F,IAFtB,WAAAwC,EAAA,MAGe1C,IAAQC,SAASC,EAAaC,IAH7C,OAGEI,EAHF,OAIFkC,EAASsD,GAAiB,IAC1BtD,EA5B4B,CAChCF,KAtEc,YAuEdiD,MA0BsBjF,EAAK2E,QACvBzC,EArBgD,CACpDF,KA5E0B,wBA6E1B+D,MAmBgC/F,EAAKgL,aAN/B,yCSLKJ,CAGbL,IC1EaU,GAhBA,SAAClH,GAAD,OAEd,yBAAKJ,UAAWgE,IAAQuD,KACvB,yBAAKvH,UAAWgE,IAAQwD,MACvB,yBAAKxH,UAAWgE,IAAQyD,MAAxB,kBAGA,yBAAKzH,UAAWgE,IAAQ0D,YACrBtH,EAAMmC,OACJ,yBAAKvC,UAAWgE,IAAQ2D,eAAgBvH,EAAMvD,MAA9C,MAAuD,4BAAQmD,UAAWgE,IAAQ4D,QAASrC,QAASnF,EAAMlD,QAAnD,YACvD,kBAAC,IAAD,CAASgH,GAAI,UAAU,4BAAQlE,UAAWgE,IAAQ4D,SAA3B,cCVzBC,G,iLAGE,OAAO,kBAAC,GAAWhB,KAAKzG,W,GAHF2G,IAAMC,WAYrBG,gBALS,SAAC9H,GAAD,MAAY,CAChCkD,OAAQlD,EAAMP,KAAKyD,OACnB1F,MAAOwC,EAAMP,KAAKjC,SAGmB,CAACK,OVoCpB,kBAAM,SAAOqB,GAAP,SAAAC,EAAAC,OAAA,kEAAAD,EAAA,MACH7B,IAAQO,UADL,OAES,IAFT,OAEXb,KAAKqC,YACdH,EAASkE,EAAgB,KAAM,KAAM,MAAM,IAHvB,wCUpCb0E,CAAqCU,I,gDCW9CC,GAAiBC,aAAU,CAACxE,KAAM,SAAjBwE,EAnBL,SAAC,GAAuC,IAAtCC,EAAqC,EAArCA,aAAcnI,EAAuB,EAAvBA,MAAO2C,EAAgB,EAAhBA,WACrC,OACI,0BAAMyF,SAAUD,GACXxH,aAAa,QAAS,QAAS,CAAC0H,MAAgB3H,MAChDC,aAAa,WAAY,WAAY,CAAC0H,MAAgB3H,KAAO,CAAClC,KAAM,aACpEmC,aAAa,KAAM,aAAc,GAAID,KAAO,CAAClC,KAAM,YAAa,eAChEmE,GAAc,yBAAKwD,IAAKxD,IACxBA,GAAchC,aAAa,qBAAsB,UAAW,CAAC0H,MAAgB3H,KAAO,IACpFV,GACG,yBAAKG,UAAWC,KAAOkI,kBAClBtI,GAET,6BACI,8CA0BDsH,gBALS,SAAC9H,GAAD,MAAY,CAChCmD,WAAYnD,EAAMP,KAAK0D,WACvBD,OAAQlD,EAAMP,KAAKyD,UAGkB,CAAC1F,MXPrB,SAACC,EAAOC,EAAUC,EAAYC,GAA9B,OAA0C,SAAOsB,GAAP,iBAAAC,EAAAC,OAAA,kEAAAD,EAAA,MACtC7B,IAAQE,MAAMC,EAAOC,EAAUC,EAAYC,IADL,OAE1B,KAD7Bb,EADuD,QAE9CC,KAAKqC,WACdH,EAASqE,MAEwB,KAA7BxG,EAASC,KAAKqC,YACdH,EAASL,KAETkK,EAAUhM,EAASC,KAAK4C,SAASoJ,OAAS,EAAIjM,EAASC,KAAK4C,SAAS,GAAK,aAC9EV,EAASQ,YAAW,QAAS,CAACC,OAAQoJ,MATiB,wCWOhDjB,EAlBA,SAAC/G,GAIZ,OAAGA,EAAMmC,OACE,kBAAC,IAAD,CAAU2B,GAAI,aAElB,6BACH,qCACA,kBAAC4D,GAAD,CAAgBG,SARH,SAACrK,GACdwC,EAAMvD,MAAMe,EAASd,MAAOc,EAASb,SAAUa,EAASZ,WAAYY,EAASX,UAOzCuF,WAAYpC,EAAMoC,iBCrCjD8F,GAAmB,SAACtB,GAE7B,OAAO,SAAC5G,GACJ,OAAO,kBAAC,IAAMmI,SAAP,CAAgBC,SAAU,4CAC7B,kBAACxB,EAAc5G,MCQrBqI,GAAoB1B,IAAM2B,MAAK,kBAAM,iCACrCC,GAAmB5B,IAAM2B,MAAK,kBAAM,iCAIpCE,G,2MACLC,wBAA0B,SAACC,GAC1BC,MAAM,sBACNC,QAAQnJ,MAAMiJ,I,mFAGdjC,KAAKzG,MAAM6I,gBACXnF,OAAOoF,iBAAiB,qBAAsBrC,KAAKgC,2B,6CAGnD/E,OAAOqF,oBAAoB,qBAAsBtC,KAAKgC,2B,+BAOtD,OACC,yBAAK7I,UAAWgE,IAAQ4E,KAEvB,kBAAC,GAAD,MACA,yBAAK5I,UAAWgE,IAAQoF,eACvB,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAIC,OAAQ,kBAAM,kBAAC,IAAD,CAAUrF,GAAI,gBAClD,kBAAC,IAAD,CAAOoF,KAAK,oBAAoBC,OAAQjB,GAAiBK,MACzD,kBAAC,IAAD,CAAOW,KAAK,YAAYC,OAAQjB,GAAiBG,MACjD,kBAAC,IAAD,CAAOa,KAAK,SAASC,OAAQ,kBAAM,kBAAC,GAAD,SACnC,kBAAC,IAAD,CAAOD,KAAK,SAASC,OAAQ,kBAAM,kBAAC,GAAD,SACnC,kBAAC,IAAD,CAAOD,KAAK,IAAIC,OAAQ,kBAAM,mDAGhC,6BACC,kBAAC,EAAD,CAAM7I,KAAK,6CAAUyD,MAAM,aAC3B,kBAAC,EAAD,CAAMzD,KAAK,yDAAYyD,MAAM,cAC7B,kBAAC,EAAD,CAAMzD,KAAK,2EAAeyD,MAAM,WAChC,kBAAC,EAAD,CAAMzD,KAAK,yDAAYyD,MAAM,oB,GAnChB4C,IAAMC,WAmDpBwC,GAAevC,YAClBE,aAVuB,SAAC9H,GAAD,MAAY,CACnC0D,YAAa1D,EAAMoE,IAAIV,eASG,CAACkG,cZhDC,kBAAM,SAAC1K,GAChC,IAAIkL,EAAUlL,EAASqE,KACvB1D,QAAQwK,IAAI,CAACD,IACRtN,MAAK,WACNoC,EAPiC,CACrCF,KAjBwB,+BYoE3BsL,IAFkB1C,CAGjB2B,IAUagB,GARC,SAACxJ,GAChB,OAAO,kBAAC,IAAD,KACN,kBAAC,IAAD,CAAUsD,MAAOA,GAChB,kBAAC8F,GAAD,SCtEHK,IAASN,OAER,kBAAC,GAAD,MAAYO,SAASC,eAAe,U,mBCTrCxK,EAAOC,QAAU,CAAC,YAAc,iCAAiC,MAAQ,2BAA2B,iBAAmB,wC,gCCDvH,oEAAO,IAAM0I,EAAgB,SAAA8B,GACzB,IAAIA,EACJ,MAAO,qGAEEC,EAAmB,SAACC,GAAD,OAAe,SAACF,GAC5C,GAAIA,GAASA,EAAM3B,OAAS6B,EAAW,MAAM,oDAAN,OAAmBA,EAAnB,wD,mBCJ3C3K,EAAOC,QAAU,CAAC,UAAY,6BAA6B,WAAa,8BAA8B,aAAe,kC,gCCDrH,sCAOesH,IAJC,SAAC1G,GACb,OAAO,yBAAK4F,IAAKmE,Q,8ICAjBC,EAA6B,SAAC/K,GAAD,MAAY,CACzCkD,OAAQlD,EAAMP,KAAKyD,SAGV2E,EAAmB,SAACF,GAAe,IACtCqD,EADqC,iLAGnC,OAAKxD,KAAKzG,MAAMmC,OACT,kBAACyE,EAAcH,KAAKzG,OADI,kBAAC,IAAD,CAAU8D,GAAI,eAHV,GACX6C,IAAMC,WAStC,OAFqCG,YAASiD,EAATjD,CAAsCkD,K,qFCb3ElM,EAAe,CACfmM,YAAa,CACT,CAAC/N,GAAI,EAAGmE,KAAM,4BACd,CAACnE,GAAI,EAAGmE,KAAM,4BACd,CAACnE,GAAI,EAAGmE,KAAM,4BACd,CAACnE,GAAI,EAAGmE,KAAM,6BAElB6J,MAAO,CACH,CAAChO,GAAI,EAAG6L,QAAS,MACjB,CAAC7L,GAAI,EAAG6L,QAAS,UACjB,CAAC7L,GAAI,EAAG6L,QAAS,UACjB,CAAC7L,GAAI,EAAG6L,QAAS,UAiCZoC,EAA0B,SAACC,EAAgBC,GAAjB,MAAgC,CACnErM,KAhDgB,cAiDhBoM,iBACAC,cAQWtH,IAxCa,WAAmC,IAAlC/D,EAAiC,uDAAzBlB,EAAcmB,EAAW,uCAU1D,OAAOA,EAAOjB,MACV,IA7BY,cA8BR,IAAIsM,EAAarL,EAAOmL,eACpBC,EAAYpL,EAAOoL,UACvB,OAAO,eACArL,EADP,CAEIkL,MAAM,GAAD,mBAAMlL,EAAMkL,OAAZ,CAAmB,CAAChO,GAAImO,EAAWtC,QAASuC,OAGzD,IApCe,iBAqCX,OAAO,eACAtL,EADP,CAEIkL,MAAOlL,EAAMkL,MAAMlI,QAAO,SAAAmD,GAAC,OAAIA,EAAEjJ,IAAM+C,EAAOoL,eAGtD,QAAS,OAAOrL,M","file":"static/js/main.f746c760.chunk.js","sourcesContent":["import * as axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        \"API-KEY\": \"0ea89e68-7ca5-4daa-9b7d-ea6106c0152f\"\r\n    }\r\n});\r\n\r\nexport const userAPI = {\r\n    getUsers (currentPage, pageSize) {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => {\r\n                return response.data;\r\n            });\r\n    },\r\n    follow (id) {\r\n        return instance.post(`follow/${id}`, {})\r\n            .then(response => {\r\n                return response.data;\r\n            });\r\n    },\r\n    unfollow (id) {\r\n        return instance.delete(`follow/${id}`)\r\n            .then(response => {\r\n                return response.data;\r\n            });\r\n    }\r\n}\r\n\r\nexport const authAPI = {\r\n    me () {\r\n        return instance.get('auth/me');\r\n    },\r\n    login (email, password, rememberMe = false, captcha = null) {\r\n        return instance.post('auth/login', {email, password, rememberMe, captcha});\r\n    },\r\n    logout () {\r\n        return instance.delete('auth/login');\r\n    }\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId) {\r\n        return instance.get(`profile/` + userId);\r\n    },\r\n    getStatus(userId) {\r\n        return instance.get(`profile/status/` + userId);\r\n    },\r\n    updateStatus(status) {\r\n        return instance.put('profile/status', {\r\n            status: status\r\n        });\r\n    },\r\n    savePhoto(photoFile) {\r\n        const formData = new FormData();\r\n        formData.append(\"image\", photoFile);\r\n        return instance.put('profile/photo', formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        });\r\n    },\r\n    saveProfile(profile) {\r\n        return instance.put('profile', profile);\r\n    }\r\n}\r\n\r\nexport const securityAPI = {\r\n    getCaptchaUrl() {\r\n        return instance.get('security/get-captcha-url');\r\n    }\r\n}\r\n","import {profileAPI} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\n\r\nconst SET_USER_PROFILE = 'SET-USER-PROFILE';\r\nconst SET_STATUS = 'SET-STATUS';\r\nconst SAVE_PHOTO_SUCCESS = 'SAVE-PHOTO-SUCCESS';\r\n\r\nlet initialState = {\r\n    profile: null,\r\n    status: \"\"\r\n};\r\n\r\nconst ProfileReducer = (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case SET_USER_PROFILE:\r\n            return {...state, profile: action.profile\r\n            }\r\n        case SET_STATUS:\r\n            return {...state, status: action.status\r\n            }\r\n        case SAVE_PHOTO_SUCCESS:\r\n            return {...state, profile: {...state.profile, photos: action.photos}\r\n            }\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport const setUserProfile = (profile) => ({\r\n    type: SET_USER_PROFILE,\r\n    profile\r\n})\r\nexport const setStatus = (status) => ({\r\n    type: SET_STATUS,\r\n    status\r\n})\r\nexport const savePhotoSuccess = (photos) => ({\r\n    type: SAVE_PHOTO_SUCCESS,\r\n    photos\r\n})\r\n\r\nexport const getUserProfile = (userId) => async (dispatch) => {\r\n    let response = await profileAPI.getProfile(userId);\r\n    dispatch(setUserProfile(response.data));\r\n}\r\nexport const getStatus = (userId) => async (dispatch) => {\r\n    let response = await profileAPI.getStatus(userId)\r\n    dispatch(setStatus(response.data));\r\n}\r\nexport const updateStatus = (status) => async (dispatch) => {\r\n    try {\r\n        let response = await profileAPI.updateStatus(status)\r\n        if (response.data.resultCode === 0) {\r\n            dispatch(setStatus(status));\r\n        }\r\n    } catch (error) {\r\n\r\n    }\r\n}\r\nexport const savePhoto = (file) => async (dispatch) => {\r\n    let response = await profileAPI.savePhoto(file)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(savePhotoSuccess(response.data.data.photos));\r\n    }\r\n}\r\nexport const saveProfile = (profile) => async (dispatch, getState) => {\r\n    const userId = getState().auth.userId;\r\n    const response = await profileAPI.saveProfile(profile)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(getUserProfile(userId));\r\n    } else {\r\n        dispatch(stopSubmit(\"edit-profile\", {_error: response.data.messages[0]}));\r\n        return Promise.reject(response.data.messages[0]);\r\n    }\r\n}\r\n\r\nexport default ProfileReducer;","module.exports = __webpack_public_path__ + \"static/media/user_image.d36d0947.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__365I4\",\"Top\":\"App_Top__2PpUP\",\"TopG\":\"App_TopG__3TZhg\",\"TopH\":\"App_TopH__3IaxZ\",\"Authorization\":\"App_Authorization__1QhbQ\",\"Menu\":\"App_Menu__1gfGv\",\"MenuG\":\"App_MenuG__3V3rD\",\"active\":\"App_active__fC974\",\"Outview\":\"App_Outview__2odBH\",\"Messages\":\"App_Messages__1qdCg\",\"loginBlock\":\"App_loginBlock__357lg\",\"button1\":\"App_button1__1F00e\",\"loginBlockDiv\":\"App_loginBlockDiv__1Mlsy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"users_userPhoto__YPNH9\"};","module.exports = __webpack_public_path__ + \"static/media/6.7cdaa43f.gif\";","import React from \"react\";\r\nimport styles from \"./FormControl.module.css\";\r\nimport {Field} from \"redux-form\";\r\n\r\nconst FormControl = ({input, meta: {touched, error}, children}) => {\r\n    const showError = touched && error;\r\n    return (\r\n        <div className={styles.formControl + \" \" + (showError ? styles.error : \"\")}>\r\n            <div>\r\n                {children}\r\n            </div>\r\n            {showError && <span>{error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Textarea = (props) => {\r\n    const {input, meta, child, ...restProps} = props;\r\n    return <FormControl {...props}><textarea {...input} {...restProps}/></FormControl>\r\n}\r\nexport const Input = (props) => {\r\n    const {input, meta, child, ...restProps} = props;\r\n    return <FormControl {...props}><input {...input} {...restProps}/></FormControl>\r\n}\r\nexport const createField = (placeholder, name, validators, component, props = {}, text = \"\") => (\r\n    <div>\r\n        <Field placeholder={placeholder} name={name} component={component} validate={validators} {...props}/> {text}\r\n    </div>\r\n)\r\n\r\n\r\n\r\n//<textarea {...input} {...props}/>","export const updateObjectInArray = (items, itemId, objPropName, newObjProps) => {\r\n    return items.map(u => {\r\n        if (u[objPropName] === itemId) {\r\n            return {...u, ...newObjProps}\r\n        }\r\n        return u;\r\n    })\r\n}\r\n\r\n","import {userAPI} from \"../api/api\";\r\nimport {updateObjectInArray} from \"../utils/object-helper\";\r\n\r\nconst FOLLOW = 'FOLLOW';\r\nconst UNFOLLOW = 'UNFOLLOW';\r\nconst SET_USERS = 'SET-USERS';\r\nconst SET_CURRENT_PAGE = 'SET-CURRENT-PAGE';\r\nconst SET_TOTAL_USERS_COUNT = 'SET-TOTAL-USERS-COUNT';\r\nconst TOGGLE_IS_FETCHING = 'TOGGLE-IS-FETCHING';\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'TOGGLE-IS-FOLLOWING-PROGRESS';\r\n\r\nlet initialState = {\r\n    users: [],\r\n    pageSize: 50,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: true,\r\n    followingInProgress: []\r\n};\r\n\r\nconst UsersPageReducer = (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, \"id\", {followed: true})\r\n               // users: state.users.map(u => {\r\n                //    if (u.id === action.userId)\r\n                //    {\r\n                //         return {...u, followed: true}\r\n                //    }\r\n                //    return u;\r\n                //})\r\n            }\r\n        case UNFOLLOW:\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, \"id\", {followed: false})\r\n                //users: state.users.map(u => {\r\n                 //   if (u.id === action.userId)\r\n                 //   {\r\n                //        return {...u, followed: false}\r\n                 //   }\r\n                //    return u;\r\n               // })\r\n            }\r\n        case SET_USERS:\r\n            return {...state, users:[...action.users],\r\n            }\r\n        case SET_CURRENT_PAGE:\r\n            return {...state, currentPage: action.currentPage,\r\n            }\r\n        case SET_TOTAL_USERS_COUNT:\r\n            return {...state, totalUsersCount: action.count,\r\n            }\r\n        case TOGGLE_IS_FETCHING:\r\n            return {...state, isFetching: action.isFetching,\r\n            }\r\n        case TOGGLE_IS_FOLLOWING_PROGRESS:\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching ? [...state.followingInProgress, action.userId] : state.followingInProgress.filter(id => id != action.userId),\r\n            }\r\n        default: return state;\r\n    }\r\n}\r\nexport const followSuccess = (userId) => ({\r\n    type: FOLLOW,\r\n    userId\r\n})\r\nexport const unfollowSuccess = (userId) => ({\r\n    type: UNFOLLOW,\r\n    userId\r\n})\r\nexport const setUsers = (users) => ({\r\n    type: SET_USERS,\r\n    users\r\n})\r\nexport const setCurrentPage = (currentPage) => ({\r\n    type: SET_CURRENT_PAGE,\r\n    currentPage\r\n})\r\nexport const setTotalUsersCount = (totalUsersCount) => ({\r\n    type: SET_TOTAL_USERS_COUNT,\r\n    count: totalUsersCount\r\n})\r\nexport const toggleIsFetching = (isFetching) => ({\r\n    type: TOGGLE_IS_FETCHING,\r\n    isFetching\r\n})\r\nexport const toggleFollowingProgress = (isFetching, userId) => ({\r\n    type: TOGGLE_IS_FOLLOWING_PROGRESS,\r\n    isFetching,\r\n    userId\r\n})\r\n\r\nexport const requestUsers = (currentPage, pageSize) => {\r\n   return async (dispatch) => {\r\n        dispatch(toggleIsFetching(true));\r\n        dispatch(setCurrentPage(currentPage));\r\n        let data = await userAPI.getUsers(currentPage, pageSize);\r\n        dispatch(toggleIsFetching(false));\r\n        dispatch(setUsers(data.items));\r\n        dispatch(setTotalUsersCount(data.totalCount));\r\n    }\r\n}\r\n\r\nconst followUnfollowFlow = async (dispatch, userId, apiMethod, actionCreator) => {\r\n    dispatch(toggleFollowingProgress (true, userId));\r\n    let data = await apiMethod(userId);\r\n    if (data.resultCode == 0) {\r\n        dispatch(actionCreator(userId));\r\n    }\r\n    dispatch(toggleFollowingProgress (false, userId));\r\n}\r\n\r\nexport const follow = (userId) => {\r\n    return async (dispatch) => {\r\n        followUnfollowFlow(dispatch, userId, userAPI.follow.bind(userAPI), followSuccess);\r\n    }\r\n}\r\nexport const unfollow = (userId) => {\r\n    return async (dispatch) => {\r\n        followUnfollowFlow(dispatch, userId, userAPI.unfollow.bind(userAPI), unfollowSuccess);\r\n    }\r\n}\r\n\r\nexport default UsersPageReducer;","import {authAPI, securityAPI} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\n\r\nconst SET_USER_DATA = 'SET-USER-DATA';\r\nconst GET_CAPTCHA_URL_SUCCESS = 'GET-CAPTCHA-URL-SUCCESS';\r\n\r\nlet initialState = {\r\n    usersId: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false,\r\n    captchaUrl: null\r\n};\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case SET_USER_DATA:\r\n        case GET_CAPTCHA_URL_SUCCESS:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        default: return state;\r\n    }\r\n}\r\nexport const setAuthUserData = (userId, email, login, isAuth) => ({\r\n    type: SET_USER_DATA,\r\n    payload: {userId, email, login, isAuth}\r\n})\r\nexport const getCaptchaUrlSuccess = (captchaUrl) => ({\r\n    type: GET_CAPTCHA_URL_SUCCESS,\r\n    payload: {captchaUrl}\r\n})\r\n\r\nexport const getAuthUserData = () => async (dispatch) => {\r\n    let response = await authAPI.me();\r\n    if (response.data.resultCode === 0) {\r\n        let {id, login, email} = response.data.data;\r\n        dispatch(setAuthUserData(id, email, login, true));\r\n    }\r\n}\r\nexport const login = (email, password, rememberMe, captcha) => async (dispatch) => {\r\n    let response = await authAPI.login(email, password, rememberMe, captcha);\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(getAuthUserData());\r\n    } else {\r\n        if (response.data.resultCode === 10) {\r\n            dispatch(getCaptchaUrl());\r\n        }\r\n        let message = response.data.messages.length > 0 ? response.data.messages[0] : \"Some error\";\r\n        dispatch(stopSubmit(\"login\", {_error: message}));\r\n    }\r\n}\r\nexport const logout = () => async (dispatch) => {\r\n    let response = await authAPI.logout();\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setAuthUserData(null, null, null, false));\r\n    }\r\n}\r\nexport const getCaptchaUrl = () => async (dispatch) => {\r\n    const response = await securityAPI.getCaptchaUrl();\r\n    const captchaUrl = response.data.url;\r\n    dispatch(getCaptchaUrlSuccess(captchaUrl));\r\n}\r\n\r\nexport default authReducer;","import {authAPI} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\nimport {getAuthUserData} from \"./auth-reducers\";\r\n\r\nconst INITIALAZED_SUCCESS = 'INITIALIZED-SUCCESS';\r\n\r\nlet initialState = {\r\n    initialized: false\r\n};\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case INITIALAZED_SUCCESS:\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            }\r\n        default: return state;\r\n    }\r\n}\r\nexport const initializedSuccess = () => ({\r\n    type: INITIALAZED_SUCCESS\r\n})\r\nexport const initializeApp = () => (dispatch) => {\r\n    let promise = dispatch(getAuthUserData());\r\n    Promise.all([promise])\r\n        .then(() => {\r\n        dispatch(initializedSuccess());\r\n    });\r\n}\r\n\r\nexport default appReducer;","import {applyMiddleware, combineReducers, createStore} from \"redux\";\r\nimport MessagesPageReducer from \"./messagesPage-reducer\";\r\nimport UsersPageReducer from \"./UsersPage-reducers\";\r\nimport ProfileReducer from \"./Profile-reducers\";\r\nimport authReducer from \"./auth-reducers\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport {reducer as formReducer} from \"redux-form\";\r\nimport appReducer from \"./app-reducer\";\r\n\r\nlet reducers = combineReducers({\r\n    messagesPage: MessagesPageReducer,\r\n    usersPage: UsersPageReducer,\r\n    profilePage: ProfileReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n});\r\n\r\nlet store = createStore(reducers,applyMiddleware(thunkMiddleware));\r\n\r\nwindow.store = store;\r\n\r\nexport default store;","import React from 'react';\r\nimport classes from './App.module.css';\r\n\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nconst Menu = (props) => (\r\n\t\r\n\r\n\t<div className={classes.Menu}>\r\n\t\t<div className={classes.MenuG}>\r\n\t\t\t<NavLink to={props.track} activeClassName={classes.active}>{props.name}</NavLink>\r\n\t\t</div>\r\n\r\n\t</div>\r\n);\r\n\r\nexport default Menu;\r\n","import React, {useState} from 'react';\r\nimport styles from \"./Paginator.module.css\";\r\nimport cn from \"classnames\";\r\n\r\nlet Paginator = ({totalItemsCount, pageSize, currentPage, onPageChanged, portionSize = 10}) => {\r\n\r\n    let pagesCount = Math.ceil(totalItemsCount/pageSize);\r\n    let pages = [];\r\n    for (let i=1; i<=pagesCount; i++) {\r\n        pages.push(i);\r\n    }\r\n    let portionCount = Math.ceil(pagesCount/portionSize);\r\n    let [portionNumber, setPortionNumber] = useState(1);\r\n    let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n    let rightPortionPageNumber = portionNumber * portionSize;\r\n    return <div className={styles.paginator}>\r\n        {portionNumber > 1 &&\r\n        <button onClick={() => {setPortionNumber(portionNumber - 1)}}>назад</button>}\r\n        {pages\r\n            .filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n            .map((p) => {\r\n            return <span className={ cn({\r\n                [styles.selectedPage] : currentPage === p\r\n            }, styles.pageNumber)}\r\n                         key={p}\r\n                         onClick={(e) => {\r\n                onPageChanged(p)\r\n            }}>{p}</span>\r\n        })}\r\n        {portionCount > portionNumber &&\r\n        <button onClick={() => {setPortionNumber(portionNumber + 1)}}>вперед</button>}\r\n    </div>\r\n}\r\n\r\nexport default Paginator;\r\n\r\n/*<div>\r\n    {pages.map(p => {\r\n        return <span className={props.currentPage === p && styles.selectedPage} onClick={(e) => {\r\n            props.onPageChanged(p)\r\n        }}>{p}</span>\r\n    })}\r\n</div>\r\n*/","import React from 'react';\r\nimport styles from \"../CSS/users.module.css\";\r\nimport userPhoto from '../assets/images/user_image.png';\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nlet User = ({user, followingInProgress, unfollow, follow}) => {\r\n    return (\r\n    <div>\r\n            <span>\r\n                <div>\r\n                    <NavLink to={'/profile/'+ user.id}>\r\n                        <img src={user.photos.small != null ? user.photos.small : userPhoto} className={styles.userPhoto}/>\r\n                    </NavLink>\r\n                </div>\r\n                <div>\r\n                    {user.followed ?\r\n                        <button disabled={followingInProgress.some(id => id === user.id)} onClick={() => {\r\n                            unfollow(user.id);\r\n                        }}>Отписаться</button> :\r\n                        <button disabled={followingInProgress.some(id => id === user.id)} onClick={() => {\r\n                            follow(user.id);\r\n                        }}>Подписаться</button>}\r\n                </div>\r\n            </span>\r\n                <span>\r\n                <span>\r\n                    <div>{user.name}</div>\r\n                    <div>{user.status}</div>\r\n                </span>\r\n                <span>\r\n                    <div>{\"user.location.country\"}</div>\r\n                    <div>{\"user.location.city\"}</div>\r\n                </span>\r\n            </span>\r\n    </div>)\r\n}\r\n\r\nexport default User;","import React from 'react';\r\nimport Paginator from \"./Common/Paginator/Paginator\";\r\nimport User from \"./User\";\r\n\r\nlet Users = ({currentPage, onPageChanged, totalUsersCount, pageSize, users, ...props}) => {\r\n    return <div>\r\n        <Paginator currentPage={currentPage} onPageChanged={onPageChanged} totalItemsCount={totalUsersCount} pageSize={pageSize}/>\r\n        {\r\n            users.map(u => <User user={u} key={u.id} followingInProgress={props.followingInProgress} unfollow={props.unfollow}\r\n                                 follow={props.follow}/>)\r\n        }\r\n    </div>\r\n}\r\n\r\nexport default Users;","import {createSelector} from \"reselect\";\r\n\r\nexport const getUsersSelector = (state) => {\r\n    return state.usersPage.users;\r\n}\r\nexport const getUsers = createSelector(getUsersSelector, (users) => {\r\n    return users.filter(u => true);\r\n})\r\nexport const getPageSize = (state) => {\r\n    return state.usersPage.pageSize;\r\n}\r\nexport const getTotalUsersCount = (state) => {\r\n    return state.usersPage.totalUsersCount;\r\n}\r\nexport const getCurrentPage = (state) => {\r\n    return state.usersPage.currentPage;\r\n}\r\nexport const getIsFetching = (state) => {\r\n    return state.usersPage.isFetching;\r\n}\r\nexport const getFollowingInProgress = (state) => {\r\n    return state.usersPage.followingInProgress;\r\n}\r\n\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {\r\n    follow, requestUsers,\r\n    setCurrentPage,\r\n    toggleFollowingProgress,\r\n    unfollow\r\n} from '../redux/UsersPage-reducers';\r\nimport Users from './Users';\r\nimport Preloader from \"./Common/Preloader/Preloader\";\r\nimport {withAuthRedirect} from \"../HOC/withAuthRedirect\";\r\nimport {compose} from \"redux\";\r\nimport {\r\n    getUsers,\r\n    getPageSize,\r\n    getTotalUsersCount,\r\n    getCurrentPage,\r\n    getIsFetching,\r\n    getFollowingInProgress\r\n} from \"../redux/users-selectors\";\r\n\r\nclass UsersContainer extends React.Component {\r\n\r\n    componentDidMount() {\r\n        this.props.getUsers(this.props.currentPage, this.props.pageSize);\r\n    }\r\n    onPageChanged = (pageNumber) => {\r\n        this.props.getUsers(pageNumber, this.props.pageSize);\r\n    }\r\n\r\n    render() {\r\n        return <>\r\n            {this.props.isFetching ? <Preloader/> : null}\r\n            <Users totalUsersCount={this.props.totalUsersCount}\r\n                        pageSize={this.props.pageSize}\r\n                        currentPage={this.props.currentPage}\r\n                        onPageChanged={this.onPageChanged}\r\n                        users={this.props.users}\r\n                        follow={this.props.follow}\r\n                        unfollow={this.props.unfollow}\r\n                        followingInProgress={this.props.followingInProgress}\r\n            />\r\n            </>\r\n    }\r\n}\r\n\r\n/*let mapStateToProps = (state) => {\r\n    return {\r\n        users: state.usersPage.users,\r\n        pageSize: state.usersPage.pageSize,\r\n        totalUsersCount: state.usersPage.totalUsersCount,\r\n        currentPage: state.usersPage.currentPage,\r\n        isFetching: state.usersPage.isFetching,\r\n        followingInProgress: state.usersPage.followingInProgress\r\n    }\r\n}*/\r\n/*let mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        follow: (userId) => {\r\n            dispatch(followActionCreator(userId))\r\n        },\r\n        unfollow: (userId) => {\r\n            dispatch(unfollowActionCreator(userId))\r\n        },\r\n        setUsers: (users) => {\r\n            dispatch(setUsersActionCreator(users))\r\n        },\r\n        setCurrentPage: (pageNumber) => {\r\n            dispatch(setCurrentPageActionCreator(pageNumber))\r\n        },\r\n        setTotalUsersCount: (totalCount) => {\r\n            dispatch(setTotalUsersCountActionCreator(totalCount))\r\n        },\r\n        toggleIsFetching: (isFetching) => {\r\n            dispatch(toggleIsFetchingActionCreator(isFetching))\r\n        }\r\n    }\r\n}\r\n*/\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        users: getUsers(state),\r\n       // users: getUsersSuperSelector(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state)\r\n    }\r\n}\r\n\r\nexport default compose(\r\n    withAuthRedirect,\r\n    connect(mapStateToProps, {follow, unfollow, setCurrentPage, toggleFollowingProgress, getUsers: requestUsers})\r\n)(UsersContainer);","import React from 'react';\r\nimport classes from '../App.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\n\r\nconst Header = (props) => (\r\n\t\r\n\t<div className={classes.Top}>\r\n\t\t<div className={classes.TopG}>\r\n\t\t\t<div className={classes.TopH}>\r\n\t\t\t\tSocial network\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.loginBlock}>\r\n\t\t\t\t\t{props.isAuth\r\n\t\t\t\t\t\t? <div className={classes.loginBlockDiv}>{props.login} - <button className={classes.button1} onClick={props.logout}>Log out</button></div>\r\n\t\t\t\t\t\t: <NavLink to={'/login'}><button className={classes.button1}>Login</button></NavLink>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n);\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport Header from \"./Header\";\r\nimport {connect} from \"react-redux\";\r\nimport {logout} from \"../redux/auth-reducers\";\r\n\r\nclass HeaderContainer extends React.Component {\r\n\r\n    render() {\r\n        return <Header {...this.props}/>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    isAuth: state.auth.isAuth,\r\n    login: state.auth.login\r\n});\r\n\r\nexport default connect (mapStateToProps, {logout}) (HeaderContainer);","import React from 'react';\r\nimport {Field, reduxForm} from \"redux-form\";\r\nimport {createField, Input} from \"../Common/FormControl/FormControl\";\r\nimport {requiredField} from \"../../utils/validators/validators\";\r\nimport {connect} from \"react-redux\";\r\nimport {login} from \"../../redux/auth-reducers\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport styles from \"../Common/FormControl/FormControl.module.css\"\r\n\r\nconst LoginForm = ({handleSubmit, error, captchaUrl}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            {createField (\"Email\", \"email\", [requiredField], Input)}\r\n            {createField (\"Password\", \"password\", [requiredField], Input, {type: \"password\"})}\r\n            {createField (null, \"rememberMe\", [], Input, {type: \"checkbox\"}, \"remember me\")}\r\n            {captchaUrl && <img src={captchaUrl}/>}\r\n            {captchaUrl && createField (\"Symbols from image\", \"captcha\", [requiredField], Input, {})}\r\n            {error &&\r\n                <div className={styles.formSummaryError}>\r\n                    {error}\r\n                </div>}\r\n            <div>\r\n                <button>Login</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst LoginReduxForm = reduxForm({form: 'login'}) (LoginForm)\r\n\r\nconst Login  = (props) => {\r\n    const onSubmit = (formData) => {\r\n        props.login(formData.email, formData.password, formData.rememberMe, formData.captcha);\r\n    }\r\n    if(props.isAuth) {\r\n        return <Redirect to={\"/profile\"}/>\r\n    }\r\n    return <div>\r\n        <h1>Login</h1>\r\n        <LoginReduxForm onSubmit={onSubmit} captchaUrl={props.captchaUrl}/>\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    captchaUrl: state.auth.captchaUrl,\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\nexport default connect (mapStateToProps, {login}) (Login)\r\n\r\n","import React from \"react\";\r\n\r\nexport const withLazySuspense = (Component) => {\r\n\r\n    return (props) => {\r\n        return <React.Suspense fallback={<div>Loading...</div>}>\r\n            <Component {...props}/>\r\n        </React.Suspense>\r\n    };\r\n}\r\n\r\n","import React from 'react';\r\nimport classes from './App.module.css';\r\nimport Menu from './Menu.js';\r\nimport {BrowserRouter, Redirect, Route, Switch, withRouter} from 'react-router-dom';\r\nimport UsersContainer from \"./components/UsersContainer\";\r\nimport HeaderContainer from \"./components/HeaderContainer\";\r\nimport LoginPage from \"./components/Login/Login\";\r\nimport {connect, Provider} from \"react-redux\";\r\nimport {compose} from \"redux\";\r\nimport {initializeApp} from \"./redux/app-reducer\";\r\nimport Preloader from \"./components/Common/Preloader/Preloader\";\r\nimport store from \"./redux/redux-store\";\r\nimport {withLazySuspense} from \"./HOC/withLazySuspense\";\r\n\r\nconst MessagesContainer = React.lazy(() => import('./components/MessagesContainer'));\r\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'));\r\n\r\n\r\n\r\nclass App extends React.Component {\r\n\tcatchAllUnhandledErrors = (promiseRejectionEvent) => {\r\n\t\talert(\"Some error occured\");\r\n\t\tconsole.error(promiseRejectionEvent);\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.props.initializeApp();\r\n\t\twindow.addEventListener(\"unhandledrejection\", this.catchAllUnhandledErrors);\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\twindow.removeEventListener(\"unhandledrejection\", this.catchAllUnhandledErrors);\r\n\t}\r\n\r\n\trender() {\r\n\t\t//if (!this.props.initialized) {\r\n\t\t//\treturn <Preloader/>\r\n\t\t//}\r\n\t\treturn (\r\n\t\t\t<div className={classes.App}>\r\n\r\n\t\t\t\t<HeaderContainer/>\r\n\t\t\t\t<div className={classes.Authorization}>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route exact path='/' render={() => <Redirect to={\"/profile\"}/>}/>\r\n\t\t\t\t\t\t<Route path='/profile/:userId?' render={withLazySuspense(ProfileContainer)}/>\r\n\t\t\t\t\t\t<Route path='/messages' render={withLazySuspense(MessagesContainer)}/>\r\n\t\t\t\t\t\t<Route path='/users' render={() => <UsersContainer/>}/>\r\n\t\t\t\t\t\t<Route path='/login' render={() => <LoginPage/>}/>\r\n\t\t\t\t\t\t<Route path='*' render={() => <div>404 not found</div>}/>\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Menu name='Профиль' track='/profile'/>\r\n\t\t\t\t\t<Menu name='Сообщения' track='/messages'/>\r\n\t\t\t\t\t<Menu name='Пользователи' track='/users'/>\r\n\t\t\t\t\t<Menu name='Настройки' track='/settings'/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tinitialized: state.app.initialized\r\n});\r\n\r\n//export default compose(\r\n//\tconnect (mapStateToProps, {initializeApp}),\r\n//\twithRouter\r\n//)(App);\r\n\r\nlet AppContainer = compose(\r\n\tconnect (mapStateToProps, {initializeApp}),\r\n\twithRouter\r\n)(App);\r\n\r\nconst MainApp = (props) => {\r\n\treturn <BrowserRouter>\r\n\t\t<Provider store={store}>\r\n\t\t\t<AppContainer />\r\n\t\t</Provider>\r\n\t</BrowserRouter>\r\n}\r\n\r\nexport default MainApp;","import store from './redux/redux-store.js';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport MainApp from './App';\r\nimport {BrowserRouter, Route} from 'react-router-dom';\r\nimport {Provider} from 'react-redux';\r\n\r\nReactDOM.render(\r\n\r\n\t<MainApp/>, document.getElementById('root'));\r\n\r\n  //<App store={store} dispatch={store.dispatch.bind(store)} />\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormControl_formControl__3Q0Iw\",\"error\":\"FormControl_error__3LtLa\",\"formSummaryError\":\"FormControl_formSummaryError__1gl80\"};","export const requiredField = value => {\r\n    if (value) return undefined;\r\n    return \"обязательное поле\";\r\n}\r\nexport const maxLenghtCreator = (maxLenght) => (value) => {\r\n    if (value && value.length > maxLenght) return `максимум ${maxLenght} символов`;\r\n    return undefined;\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__15_9g\",\"pageNumber\":\"Paginator_pageNumber__2_Onr\",\"selectedPage\":\"Paginator_selectedPage__K6Iml\"};","import preloader from \"../../../assets/images/6.gif\";\r\nimport React from \"react\";\r\n\r\nlet Preloader = (props) => {\r\n    return <img src={preloader}/>\r\n}\r\n\r\nexport default Preloader;","import React from \"react\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\n\r\nlet mapStateToPropsForRedirect = (state) => ({\r\n    isAuth: state.auth.isAuth\r\n});\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n    class RedirectComponent extends React.Component {\r\n        render () {\r\n            if (!this.props.isAuth) return <Redirect to={\"/login\"}/>\r\n            return <Component {...this.props}/>\r\n        }\r\n    }\r\n\r\n    let ConnectedAuthRedirectComponent = connect (mapStateToPropsForRedirect) (RedirectComponent);\r\n\r\n    return ConnectedAuthRedirectComponent;\r\n}\r\n\r\n\r\n","const ADD_MESSAGE = 'ADD-MESSAGE';\r\nconst DELETE_MESSAGE = 'DELETE-MESSAGE';\r\n\r\nlet initialState = {\r\n    dialogsData: [\r\n        {id: 1, name: 'Вася'},\r\n        {id: 2, name: 'Петя'},\r\n        {id: 3, name: 'Леша'},\r\n        {id: 4, name: 'Гена'}\r\n    ],\r\n    posts: [\r\n        {id: 1, message: 'hi'},\r\n        {id: 2, message: 'privet'},\r\n        {id: 3, message: 'blabla'},\r\n        {id: 4, message: 'olle'}\r\n    ],\r\n};\r\n\r\nconst MessagesPageReducer = (state = initialState, action) => {\r\n\r\n    let addMessage = () => {\r\n\r\n    }\r\n\r\n    let changeNewMessageText = (newText) => {\r\n\r\n    }\r\n\r\n    switch(action.type) {\r\n        case ADD_MESSAGE: {\r\n            let newMessage = action.newMessageText;\r\n            let messageId = action.messageId;\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, {id: messageId, message: newMessage}]\r\n            };\r\n        }\r\n        case DELETE_MESSAGE: {\r\n            return {\r\n                ...state,\r\n                posts: state.posts.filter(p => p.id != action.messageId)\r\n            };\r\n        }\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport const addMessageActionCreator = (newMessageText, messageId) => ({\r\n    type: ADD_MESSAGE,\r\n    newMessageText,\r\n    messageId\r\n})\r\nexport const deleteMessageActionCreator = (messageId) => ({\r\n    type: DELETE_MESSAGE,\r\n    messageId\r\n})\r\n\r\n\r\nexport default MessagesPageReducer;"],"sourceRoot":""}